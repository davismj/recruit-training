<template>
  <section id="contact-list-page" class="row">
    <div class="list-group col-md-4">
      <a repeat.for="contact of contactService.contacts"
         class="list-group-item ${contact.id === $parent.contact.id ? 'active' : ''} d-flex"
         route-href="route: contact-detail; params.bind: { id: contact.id }">
        ${contact.name}
        <button type="button" class="btn btn-sm btn-danger ml-auto" click.delegate="remove(contact)">
          <span>&times;</span>
        </button>
      </a>
      <a class="list-group-item bg-success text-white"
         route-href="route: contact-detail; params.bind: { id: 'new' }">
         Add new Contact
       </a>
    </div>
    <form class="col-md-8" if.bind="contact" submit.delegate="save()">
      <label class="form-group">
        <span>Name</span>
        <input class="form-control ${contact.name ? '' : 'is-invalid'}" type="text" value.bind="contact.name" />
        <div class="invalid-feedback" if.bind="!contact.name">
          Your name is required.
        </div>
      </label>
      <label class="form-group">
        <span>Phone Number</span>
        <input class="form-control ${isPhoneNumber(contact.phone) ? '' : 'is-invalid'}" type="text" value.bind="contact.phone" />
        <div class="invalid-feedback" if.bind="!isPhoneNumber(contact.phone)">
          Your phone number should be in the format 000-0000-0000.
        </div>
      </label>
      <label class="form-group">
        <span>Email Address</span>
        <input class="form-control ${isEmail(contact.email) ? '' : 'is-invalid'}" type="text" value.bind="contact.email" />
        <div class="invalid-feedback" if.bind="!isEmail(contact.email)">
          Your email is invalid.
        </div>
      </label>
      <div class="d-flex">
        <a class="btn btn-default ml-auto" route-href="contact-list">Cancel</a>
        <button class="btn btn-primary" type="submit" disabled.bind="!isValid">Save</button>
      </div>
    </form>
  </section>
</template>
